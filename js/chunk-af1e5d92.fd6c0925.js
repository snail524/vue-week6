(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-af1e5d92"],{"0b42":function(t,e,c){var n=c("da84"),o=c("e8b5"),a=c("68ee"),i=c("861d"),r=c("b622"),s=r("species"),l=n.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,a(e)&&(e===l||o(e.prototype))?e=void 0:i(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?l:e}},"1dde":function(t,e,c){var n=c("d039"),o=c("b622"),a=c("2d00"),i=o("species");t.exports=function(t){return a>=51||!n((function(){var e=[],c=e.constructor={};return c[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"65f0":function(t,e,c){var n=c("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},"6be2":function(t,e,c){"use strict";var n=function(t){return{all:t=t||new Map,on:function(e,c){var n=t.get(e);n?n.push(c):t.set(e,[c])},off:function(e,c){var n=t.get(e);n&&(c?n.splice(n.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var n=t.get(e);n&&n.slice().map((function(t){t(c)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,c)}))}}},o=n();e["a"]=o},8418:function(t,e,c){"use strict";var n=c("a04b"),o=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var i=n(e);i in t?o.f(t,i,a(0,c)):t[i]=c}},"99af":function(t,e,c){"use strict";var n=c("23e7"),o=c("da84"),a=c("d039"),i=c("e8b5"),r=c("861d"),s=c("7b0b"),l=c("07fa"),u=c("8418"),d=c("65f0"),b=c("1dde"),g=c("b622"),p=c("2d00"),O=g("isConcatSpreadable"),j=9007199254740991,f="Maximum allowed index exceeded",h=o.TypeError,v=p>=51||!a((function(){var t=[];return t[O]=!1,t.concat()[0]!==t})),m=b("concat"),C=function(t){if(!r(t))return!1;var e=t[O];return void 0!==e?!!e:i(t)},y=!v||!m;n({target:"Array",proto:!0,forced:y},{concat:function(t){var e,c,n,o,a,i=s(this),r=d(i,0),b=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?i:arguments[e],C(a)){if(o=l(a),b+o>j)throw h(f);for(c=0;c<o;c++,b++)c in a&&u(r,b,a[c])}else{if(b>=j)throw h(f);u(r,b++,a)}return r.length=b,r}})},cc55:function(t,e,c){"use strict";c.r(e);c("99af");var n=c("7a23"),o=Object(n["g"])("h2",null," 購物車",-1),a={class:"table align-middle"},i=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"圖片"),Object(n["g"])("th",null,"商品名稱"),Object(n["g"])("th",null,"價格"),Object(n["g"])("th")])],-1),r={style:{width:"200px"}},s={key:0,class:"h5"},l={key:1},u={class:"h6"},d={class:"h5"},b={class:"btn-group btn-group-sm"},g=["onClick"],p={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},O=Object(n["i"])(" 查看更多 "),j=["onClick"],f={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},h=Object(n["i"])(" 加到購物車 "),v={class:"text-end"},m={class:"table align-middle"},C=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th"),Object(n["g"])("th",null,"品名"),Object(n["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["g"])("th",null,"單價")])],-1),y=["onClick"],x={key:0,class:"fas fa-spinner fa-pulse"},k=Object(n["g"])("div",{class:"text-success"}," 已套用優惠券 ",-1),I={class:"input-group input-group-sm"},w={class:"input-group mb-3"},A=["onUpdate:modelValue","onChange","disabled"],D=["value","selected"],P={class:"input-group-text",id:"basic-addon2"},M={class:"text-end"},$=Object(n["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),q={class:"text-end"},z=Object(n["g"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),T={class:"text-end text-success"};function U(t,e,c,U,_,E){return Object(n["t"])(),Object(n["f"])(n["a"],null,[o,Object(n["g"])("table",a,[i,(Object(n["t"])(!0),Object(n["f"])(n["a"],null,Object(n["z"])(_.cartProducts,(function(t){return Object(n["t"])(),Object(n["f"])("tbody",{key:t.id},[Object(n["g"])("tr",null,[Object(n["g"])("td",r,[Object(n["g"])("div",{style:Object(n["p"])([{backgroundImage:"url(".concat(t.imageUrl,")")},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),Object(n["g"])("td",null,Object(n["C"])(t.title),1),Object(n["g"])("td",null,[t.origin_price===t.price?(Object(n["t"])(),Object(n["f"])("div",s,Object(n["C"])(t.price)+" 元",1)):(Object(n["t"])(),Object(n["f"])("div",l,[Object(n["g"])("del",u,"原價 "+Object(n["C"])(t.origin_price)+" 元",1),Object(n["g"])("div",d,"現在只要 "+Object(n["C"])(t.price)+" 元",1)]))]),Object(n["g"])("td",null,[Object(n["g"])("div",b,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(e){return E.openProdcutModal(t.id)}},[_.isloadingItem===t.id?(Object(n["t"])(),Object(n["f"])("span",p)):Object(n["e"])("",!0),O],8,g),Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(e){return E.addToCart(t.id)}},[_.isloadingItem===t.id?(Object(n["t"])(),Object(n["f"])("span",f)):Object(n["e"])("",!0),h],8,j)])])])])})),128))]),Object(n["g"])("div",v,[Object(n["g"])("button",{class:"btn btn-outline-danger",onClick:e[0]||(e[0]=function(){return E.removeCartAll&&E.removeCartAll.apply(E,arguments)}),type:"button"},"清空購物車")]),Object(n["g"])("table",m,[C,Object(n["g"])("tbody",null,[_.cartsData?(Object(n["t"])(!0),Object(n["f"])(n["a"],{key:0},Object(n["z"])(_.cartsData.carts,(function(e){return Object(n["t"])(),Object(n["f"])("tr",{key:e.id},[Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return E.removeCartItem(e.id)}},[_.isloadingItem===e.id?(Object(n["t"])(),Object(n["f"])("i",x)):Object(n["e"])("",!0),Object(n["i"])(" "+Object(n["C"])(_.cartsData.carts.id)+" x ",1)],8,y)]),Object(n["g"])("td",null,[Object(n["i"])(Object(n["C"])(e.product.title)+" ",1),k]),Object(n["g"])("td",null,[Object(n["g"])("div",I,[Object(n["g"])("div",w,[Object(n["I"])(Object(n["g"])("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":function(t){return e.qty=t},onChange:function(c){return t.upDateToCart(e)},disabled:_.isloadingItem===e.id},[(Object(n["t"])(),Object(n["f"])(n["a"],null,Object(n["z"])(20,(function(t){return Object(n["g"])("option",{value:t,key:"".concat(t).concat(e.id),selected:e.qty===t},Object(n["C"])(t),9,D)})),64))],40,A),[[n["E"],e.qty]]),Object(n["g"])("span",P,Object(n["C"])(e.product.unit),1)])])]),Object(n["g"])("td",M,Object(n["C"])(e.total),1)])})),128)):Object(n["e"])("",!0)]),Object(n["g"])("tfoot",null,[Object(n["g"])("tr",null,[$,Object(n["g"])("td",q,Object(n["C"])(_.cartsData.total),1)]),Object(n["g"])("tr",null,[z,Object(n["g"])("td",T,Object(n["C"])(),1)])])])],64)}var _=c("6be2"),E={data:function(){return{products:[],cartProducts:{},cartsData:{},isloadingItem:""}},components:{},methods:{getProdcuts:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/products/all")).then((function(e){t.cartProducts=e.data.products})).catch((function(t){console.log(t)}))},openProdcutModal:function(t){this.productId=t,this.$refs.productModal.openModal()},addToCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={product_id:t,qty:c};this.isloadingItem=t,this.$http.post("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart"),{data:n}).then((function(t){console.log(t.data.data),e.getCart(),e.isloadingItem="",_["a"].emit("get-cart")})).catch((function(t){console.log(t)}))},getCart:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart")).then((function(e){console.log("cart",e.data.data),t.cartsData=e.data.data})).catch((function(t){console.log(t)}))},removeCartItem:function(t){var e=this;console.log(t),this.isloadingItem=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/cart/").concat(t)).then((function(t){console.log(t),e.getCart(),e.isloadingItem=""}))},removeCartAll:function(){var t=this;this.$http.delete("".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("immigrant524","/carts")).then((function(e){console.log(e),t.getCart()}))}},mounted:function(){this.getProdcuts(),this.getCart()}},J=c("6b0d"),V=c.n(J);const B=V()(E,[["render",U]]);e["default"]=B},e8b5:function(t,e,c){var n=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=chunk-af1e5d92.fd6c0925.js.map